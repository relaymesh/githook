replicaCount: 1

image:
  repository: ghcr.io/yindia/githooks
  tag: "latest"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8080

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}

webhook:
  githubSecret: ""
  gitlabSecret: ""
  bitbucketSecret: ""

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 80

pdb:
  enabled: false
  minAvailable: 1
  maxUnavailable: ""

configYaml: |-
  server:
    port: 8080

  providers:
    github:
      enabled: true
      webhook:
        secret: ${GITHUB_WEBHOOK_SECRET}
    gitlab:
      enabled: false
      webhook:
        secret: ${GITLAB_WEBHOOK_SECRET}
    bitbucket:
      enabled: false
      webhook:
        secret: ${BITBUCKET_WEBHOOK_SECRET}

  watermill:
    driver: gochannel

  rules:
    - when: action == "opened" && pull_request.draft == false
      emit: pr.opened.ready

    - when: action == "closed" && pull_request.merged == true
      emit: pr.merged
